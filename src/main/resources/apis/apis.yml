swagger: "2.0"
info:
  title: Demo APIs
  version: "2.0"
  description: Use VSCode plugin [OpenAPI (Swagger) Editor](https://marketplace.visualstudio.com/items?itemName=42Crunch.vscode-openapi) to edit this document.
host: localhost:8618
schemes:
  - http
  - https

paths:
  /v1/login:
    post:
      summary: 用户登录
      tags:
        - auth
      operationId: login
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - name: rememberMe
          in: query
          type: boolean
          required: true
          description: 记住我
          default: true
        - name: body
          in: body
          schema:
            $ref: "#/definitions/LoginRequest"
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/LoginResponse"
        400:
          description: parameter error
        500:
          description: server error
  /v1/logout:
    get:
      summary: 用户登出
      tags:
        - auth
      operationId: logout
      responses:
        200:
          description: success
        401:
          description: unauthorized
  /v1/user:
    post:
      summary: 添加用户
      tags:
        - user
      description: 添加用户(仅root)
      operationId: createUser
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: body
          name: body
          required: true
          schema:
            $ref: "#/definitions/CreateUserRequest"
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/BaseResp"
        400:
          description: parameter error
        500:
          description: server error
    put:
      summary: 修改用户
      tags:
        - user
      description: 修改用户(普通用户仅能修改自己)
      operationId: updateUser
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - name: id
          in: query
          required: true
          type: integer
          description: 用户id
        - in: body
          name: body
          required: true
          schema:
            $ref: "#/definitions/UpdateUserRequest"
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/UserLoginResponse"
        400:
          description: parameter error
        500:
          description: server error
    delete:
      tags:
        - user
      summary: 删除用户
      description: 删除用户(仅root),删除用户前需要先删除用户下挂载的任务
      operationId: deleteUser
      produces:
        - "application/json"
      parameters:
        - name: id
          in: query
          required: true
          type: integer
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/BaseResp"
        400:
          description: parameter error
        500:
          description: server error
  /v1/user/list:
    get:
      tags:
        - user
      summary: 获取用户列表
      operationId: userList
      produces:
        - "application/json"
      parameters:
        - name: userName
          in: query
          type: string
        - name: currentPage
          in: query
          type: integer
          default: 1
        - name: pageSize
          in: query
          type: integer
          default: 10
        - name: startTime
          in: query
          type: string
        - name: endTime
          in: query
          type: string
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/UserListResponse"
        400:
          description: parameter error
        500:
          description: server error
  /v1/user/project:
    get:
      tags:
        - user
      summary: 获取项目成员列表
      description: 获取项目成员列表
      operationId: userListByPid
      produces:
        - "application/json"
      parameters:
        - name: pid
          in: query
          type: integer
          description: 项目id,用于精确获取项目+版本关联的人员
        - name: projectName
          in: query
          type: string
          description: 项目名称,用于获取项目(多版本)关联的人员,与pid一起上报时只有pid生效
        - name: currentPage
          in: query
          type: integer
          default: 1
        - name: pageSize
          in: query
          type: integer
          default: 10
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/UserListByPidResponse"
        400:
          description: parameter error
        500:
          description: server error
  /v1/user/project/owner:
    get:
      tags:
        - user
      summary: 通过项目名称获取项目负责人列表
      description: 通过项目名称获取项目负责人列表
      operationId: userListByProjectName
      produces:
        - "application/json"
      parameters:
        - name: projectName
          in: query
          type: string
          description: 项目名称,用于获取项目(多版本)的项目负责人信息
        - name: currentPage
          in: query
          type: integer
          default: 1
        - name: pageSize
          in: query
          type: integer
          default: 10
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/UserListByPidResponse"
        400:
          description: parameter error
        500:
          description: server error
  /v1/user/password:
    put:
      summary: 修改用户密码
      tags:
        - user
      description: 修改用户
      operationId: updateUserPassword
      produces:
        - "application/json"
      parameters:
        - name: id
          in: query
          required: true
          type: integer
          description: 用户id
        - name: newPassword
          in: query
          required: true
          type: string
          minLength: 8
          maxLength: 16
          description: 新密码
        - name: oldPassword
          in: query
          required: true
          type: string
          minLength: 8
          maxLength: 16
          description: 旧密码
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/BaseResp"
        400:
          description: parameter error
        500:
          description: server error
  /v1/project:
    get:
      tags:
        - project
      summary: 通过项目id查询项目信息
      description: 通过项目id查询项目信息
      operationId: getProjectById
      produces:
        - "application/json"
      parameters:
        - name: id
          in: query
          type: integer
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/GetProjectByIdResponse"
        400:
          description: parameter error;
        500:
          description: server error;
    post:
      tags:
        - project
      summary: 创建项目
      description: 创建项目(仅root),name+version要唯一
      operationId: createProject
      produces:
        - "application/json"
      parameters:
        - in: body
          name: body
          required: true
          schema:
            $ref: "#/definitions/CreateProjectRequest"
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/BaseResp"
        400:
          description: parameter error;
        500:
          description: server error;
    put:
      tags:
        - project
      summary: 修改项目信息
      description: 修改项目信息
      operationId: updateProject
      produces:
        - "application/json"
      parameters:
        - in: query
          name: id
          type: integer
          required: true
        - in: body
          name: body
          required: true
          schema:
            $ref: "#/definitions/UpdateProjectRequest"
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/BaseResp"
        400:
          description: parameter error;
        500:
          description: server error;
    delete:
      tags:
        - project
      summary: 删除项目
      description: 删除项目(仅root)
      operationId: deleteProject
      produces:
        - "application/json"
      parameters:
        - in: query
          name: id
          type: integer
          required: true
          description: 项目id
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/BaseResp"
        400:
          description: parameter error
        500:
          description: server error
  /v1/project/list:
    get:
      tags:
        - project
      summary: 获取项目列表
      description: 获取项目列表
      operationId: projectList
      produces:
        - "application/json"
      parameters:
        - name: name
          in: query
          type: string
        - name: currentPage
          in: query
          type: integer
          default: 1
        - name: pageSize
          in: query
          type: integer
          default: 10
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/ProjectListResponse"
        400:
          description: parameter error
        500:
          description: server error
  /v1/project/module/task:
    get:
      tags:
        - project
      summary: 查询项目功能模块下是否有任务
      description: 功能模块下有任务不能删除项目的功能模块
      operationId: queryProjectModuleHaveTask
      produces:
        - "application/json"
      parameters:
        - in: query
          name: id
          type: integer
          required: true
          description: 功能块id
      responses:
        200:
          description: success
          schema:
            type: boolean
        400:
          description: parameter error;
        500:
          description: server error;
  /v1/project/module/list:
    get:
      tags:
        - project
      summary: 查询项目功能模块
      description: 查询项目功能模块
      operationId: queryProjectModule
      produces:
        - "application/json"
      parameters:
        - in: query
          name: id
          type: integer
          required: true
      responses:
        200:
          description: success
          schema:
            type: array
            items:
              $ref: "#/definitions/ProjectModuleResponse"
        400:
          description: parameter error;
        500:
          description: server error;
  /v1/project/group/name:
    get:
      tags:
        - project
      summary: 聚合项目名称
      description: 聚合项目名称
      operationId: projectGroupName
      produces:
        - "application/json"
      responses:
        200:
          description: success
          schema:
            type: array
            items:
              type: string
        500:
          description: server error
  /v1/project/statistics:
    get:
      tags:
        - project
      summary: 活动项目统计
      description: 统计开发中项目任务完成信息
      operationId: projectStatistics
      produces:
        - "application/json"
      parameters:
        - name: currentPage
          in: query
          type: integer
          default: 1
        - name: pageSize
          in: query
          type: integer
          default: 10
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/ProjectStatisticsListResponse"
        500:
          description: server error
  /v1/project/versions:
    get:
      tags:
        - project
      summary: 获取项目版本
      description: 通过项目名称获取项目版本
      operationId: getProjectVersions
      produces:
        - "application/json"
      parameters:
        - name: pid
          in: query
          type: integer
          required: true
      responses:
        200:
          description: success
          schema:
            type: array
            items:
              $ref: "#/definitions/ProjectVersionsResponse"
        500:
          description: server error
    post:
      tags:
        - project
      summary: 创建项目版本
      description: 创建项目版本
      operationId: createProjectVersion
      produces:
        - "application/json"
      parameters:
        - in: body
          name: body
          required: true
          schema:
            $ref: "#/definitions/CreateProjectVersionRequest"
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/BaseResp"
        400:
          description: parameter error;
        500:
          description: server error;
    delete:
      tags:
        - project
      summary: 删除项目版本
      description: 删除项目版本,版本下有任务无法删除
      operationId: deleteProjectVersion
      produces:
        - "application/json"
      parameters:
        - in: query
          type: integer
          name: id
          required: true
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/BaseResp"
        400:
          description: parameter error
        500:
                description: server error
  /v1/project/versions/all:
    get:
      tags:
        - project
      summary: 获取全部项目版本
      description: 获取全部项目版本
      operationId: getProjectVersionsAll
      produces:
        - "application/json"
      responses:
        200:
          description: success
          schema:
            type: array
            items:
              $ref: "#/definitions/ProjectVersionsAllResponse"
        500:
          description: server error
  /v1/task:
    post:
      tags:
        - task
      summary: 创建任务
      description: 创建任务
      operationId: createTask
      produces:
        - "application/json"
      parameters:
        - in: body
          name: body
          required: true
          schema:
            $ref: "#/definitions/CreateTaskRequest"
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/BaseResp"
        400:
          description: parameter error
        500:
          description: server error
    put:
      tags:
        - task
      summary: 更新任务
      description: 更新任务
      operationId: updateTask
      produces:
        - "application/json"
      parameters:
        - in: query
          name: id
          type: integer
          required: true
          description: 任务id
        - in: body
          name: body
          required: true
          schema:
            $ref: "#/definitions/UpdateTaskRequest"
      responses:
        200:
          description: success
        400:
          description: parameter error
        500:
          description: server error
    delete:
      tags:
        - task
      summary: 删除任务
      description: 删除任务
      operationId: deleteTask
      produces:
        - "application/json"
      parameters:
        - in: query
          name: id
          type: integer
          required: true
      responses:
        200:
          description: success
        400:
          description: parameter error
        500:
          description: server error
  /v1/task/list:
    get:
      tags:
        - task
      summary: 获取任务列表
      description: 获取任务列表
      operationId: taskList
      produces:
        - "application/json"
      parameters:
        - name: currentPage
          in: query
          type: integer
          default: 1
        - name: pageSize
          in: query
          type: integer
          default: 10
        - in: query
          name: projectUid
          type: integer
          description: 项目负责人id
        - in: query
          name: status
          type: string
          description: 任务状态 1已完成；2反馈; 3待验收；4开发中；5暂停; 6排队中; 多状态使用英文逗号分隔
        - in: query
          name: pid
          type: integer
          description: 项目id
        - in: query
          name: vid
          type: integer
          description: 版本id
        - in: query
          name: uid
          type: integer
          description: 开发者id
        - in: query
          name: startTime
          type: string
          description: 计划开始时间,起始,时间戳(ms)
        - in: query
          name: endTime
          type: string
          description: 计划开始时间,结束,时间戳(ms)
        - in: query
          name: abnormal
          type: string
          enum:
            - 1
            - 2
          description: 1将过期,2已过期
        - in: query
          name: sortField
          type: string
          description: 排序字段,多字段用英文逗号分隔
        - in: query
          name: isAsc
          type: boolean
          description: 是否为升序,当指定sortField时,isAsc也必须指定
        - in: query
          name: mid
          type: string
          description: 功能模块id,多模块用英文逗号分隔
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/TaskListResponse"
        400:
          description: parameter error
        500:
          description: server error
  /v1/task/relevance/list:
    get:
      tags:
        - task
      summary: 查询项目关联的外部任务
      description: 查询项目关联的外部任务
      operationId: getTaskRelevanceList
      produces:
        - "application/json"
      parameters:
        - name: vid
          in: query
          type: integer
          required: true
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/TaskListResponse"
        400:
          description: parameter error
        500:
          description: server error
  /v1/task/relevance:
    get:
      tags:
        - task
      summary: 获取任务关联的外部项目版本信息
      description: 获取任务关联的外部项目版本信息
      operationId: getTaskRelevance
      produces:
        - "application/json"
      parameters:
        - name: tid
          in: query
          type: integer
          required: true
          description: 任务id
      responses:
        200:
          description: success
          schema:
            type: array
            items:
              $ref: "#/definitions/ProjectVersionsAllResponse"
        400:
          description: parameter error
        500:
          description: server error
  /v1/task/statistics:
    get:
      tags:
        - task
      summary: 任务统计信息
      description: 任务统计信息
      operationId: taskStatistics
      produces:
        - "application/json"
      parameters:
        - name: pid
          in: query
          type: integer
        - name: uid
          in: query
          type: integer
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/TaskStatisticsResponse"
        500:
          description: server error
  /v1/task/change:
    post:
      tags:
        - taskChange
      summary: 创建任务变更
      description: 创建任务变更
      operationId: createTaskChange
      produces:
        - "application/json"
      parameters:
        - in: body
          name: body
          required: true
          schema:
            $ref: "#/definitions/CreateTaskChangeRequest"
      responses:
        200:
          description: success
        400:
          description: parameter error
        500:
          description: server error
    put:
      tags:
        - taskChange
      summary: 修改任务变更
      description: 修改任务变更
      operationId: updateTaskChange
      produces:
        - "application/json"
      parameters:
        - in: query
          name: id
          type: integer
          description: 任务变更记录id
        - in: body
          name: body
          required: true
          schema:
            $ref: "#/definitions/UpdateTaskChangeRequest"
      responses:
        200:
          description: success
        400:
          description: parameter error
        500:
          description: server error
    get:
      tags:
        - taskChange
      summary: 获取任务变更原因
      description: 获取任务变更原因
      operationId: getTaskChange
      produces:
        - "application/json"
      parameters:
        - name: taskId
          in: query
          type: integer
          description: 任务id
        - name: auditorId
          in: query
          type: integer
          description: 审核人id
        - name: status
          in: query
          type: string
          description: 状态:1待审核,2通过,3未通过,4不审核;多状态使用英文逗号分隔
        - name: currentPage
          in: query
          type: integer
          default: 1
        - name: pageSize
          in: query
          type: integer
          default: 10
        - in: query
          name: sortField
          type: string
          description: 排序字段
        - in: query
          name: isAsc
          type: boolean
          description: 是否为升序,当指定sortField时,isAsc也必须指定
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/TaskChangeListResponse"
        500:
          description: server error
  /v1/task/log:
    post:
      tags:
        - taskLog
      summary: 添加任务日志
      description: 添加任务日志
      operationId: createTaskLog
      produces:
        - "application/json"
      parameters:
        - in: body
          name: body
          required: true
          schema:
            $ref: "#/definitions/CreateTaskLogRequest"
      responses:
        200:
          description: success
        400:
          description: parameter error
        500:
          description: server error
    get:
      tags:
        - taskLog
      summary: 获取任务日志列表
      description: 获取任务日志列表
      operationId: getTaskLog
      produces:
        - "application/json"
      parameters:
        - name: taskId
          in: query
          type: integer
          description: 任务id
        - name: currentPage
          in: query
          type: integer
          default: 1
        - name: pageSize
          in: query
          type: integer
          default: 10
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/TaskLogListResponse"
        500:
          description: server error
  /v1/task/log/last:
    get:
      tags:
        - taskLog
      summary: 获取最新的任务日志
      description: 获取最新的任务日志
      operationId: getLastTaskLog
      produces:
        - "application/json"
      parameters:
        - name: taskId
          in: query
          required: true
          type: integer
          description: 任务id
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/LastTaskLogResponse"
        400:
          description: parameter error
        500:
          description: server error
  /v1/task/feedback:
    post:
      tags:
        - taskFeedback
      summary: 创建任务验收问题反馈
      description: 创建任务验收问题反馈
      operationId: createFeedback
      produces:
        - "application/json"
      parameters:
        - in: body
          name: body
          required: true
          schema:
            $ref: "#/definitions/CreateFeedbackRequest"
      responses:
        200:
          description: success
        400:
          description: parameter error
        500:
          description: server error
    put:
      tags:
        - taskFeedback
      summary: 修改问题反馈
      description: 修改问题反馈
      operationId: updateFeedback
      produces:
        - "application/json"
      parameters:
        - in: query
          name: id
          type: integer
          description: 任务问题反馈id
          required: true
        - in: body
          name: body
          required: true
          schema:
            $ref: '#/definitions/UpdateFeedbackRequest'
      responses:
        200:
          description: success
        400:
          description: parameter error
        500:
          description: server error
    delete:
      tags:
        - taskFeedback
      summary: 删除任务问题反馈
      description: 删除任务问题反馈
      operationId: deleteFeedback
      produces:
        - "application/json"
      parameters:
        - in: query
          name: id
          type: integer
          required: true
          description: 任务问题反馈id
      responses:
        200:
          description: success
        400:
          description: parameter error
        500:
          description: server error
  /v1/task/feedback/list:
    get:
      tags:
        - taskFeedback
      summary: 查询任务的反馈问题列表
      description: 查询任务的反馈问题列表
      operationId: getFeedbackList
      produces:
        - "application/json"
      parameters:
        - in: query
          name: tid
          type: integer
          description: 任务id
        - name: currentPage
          in: query
          type: integer
          default: 1
        - name: pageSize
          in: query
          type: integer
          default: 10
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/FeedbackListResponse"
        400:
          description: parameter error
        500:
          description: server error
  /v1/task/log/aggregation:
    get:
      tags:
        - taskLog
      summary: 获取任务日志聚合列表
      description: 获取任务日志聚合列表,用于任务日志页面
      operationId: getTaskLogAggregation
      produces:
        - "application/json"
      parameters:
        - name: currentPage
          in: query
          type: integer
          default: 1
        - name: pageSize
          in: query
          type: integer
          default: 10
        - name: uid
          in: query
          type: integer
        - name: log
          in: query
          type: string
          maxLength: 255
          description: 日志内容,支持模糊查询
        - in: query
          name: startTime
          type: string
          description: 开始时间,时间戳(ms)
        - in: query
          name: endTime
          type: string
          description: 结束时间.时间戳(ms)
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/TaskLogAggregationListResponse"
        500:
          description: server error
  /v1/task/handleSort:
    put:
      tags:
        - task
      summary: 拖拽任务排序
      description: 拖拽任务排序
      operationId: handleTaskSort
      produces:
        - "application/json"
      parameters:
        - in: query
          name: taskId
          type: integer
          required: true
          description: 被移动的任务id
        - in: query
          name: newSerialNumber
          type: integer
          required: true
          description: 移动后的新序号
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/BaseResp"
        400:
          description: parameter error
        500:
          description: server error
  /v1/operationLog/list:
    get:
      tags:
        - operationLog
      summary: 操作日志
      description: 操作日志
      operationId: operationLogList
      produces:
        - "application/json"
      parameters:
        - in: query
          name: uid
          type: integer
        - in: query
          name: record
          type: string
          maxLength: 255
          description: 日志内容
        - in: query
          name: startTime
          type: string
          description: 开始时间,时间戳(ms)
        - in: query
          name: endTime
          type: string
          description: 结束时间.时间戳(ms)
        - name: currentPage
          in: query
          type: integer
          default: 1
        - name: pageSize
          in: query
          type: integer
          default: 10
      responses:
        200:
          description: success
          schema:
            $ref: "#/definitions/OperationLogListResponse"
        400:
          description: parameter error
        500:
          description: server error
# common parameters
parameters:
  queryPageSize:
    name: page_size
    in: query
    type: integer
    required: false
    default: 20
    description: 每页条数
  queryCurrentPage:
    name: current_page
    in: query
    type: integer
    required: false
    default: 1
    description: 当前页

# common data structure
definitions:
  BaseResp:
    type: object
    properties:
      message:
        type: string
  OnePageData:
    type: object
    properties:
      pagination:
        type: object
        properties:
          totalSize:
            type: integer
            example: 1000
          currentPage:
            type: integer
            example: 1
          pageSize:
            type: integer
            example: 20
  LoginRequest:
    type: object
    required:
      - userName
      - password
    properties:
      userName:
        type: string
      password:
        type: string
  LoginResponse:
    type: object
    properties:
      message:
        type: string
      result:
        type: object
        $ref: "#/definitions/UserLoginResponse"
  CreateUserRequest:
    type: object
    required:
      - userName
      - password
      - nickName
      - email
    properties:
      userName:
        type: string
        pattern: ^[a-zA-Z][_a-zA-Z0-9]+$
        minLength: 2
        maxLength: 32
      password:
        type: string
        minLength: 8
        maxLength: 16
      nickName:
        type: string
        minLength: 2
        maxLength: 32
      email:
        type: string
        minLength: 2
        maxLength: 32
        pattern: ^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$
      remark:
        type: string
        maxLength: 255
  UpdateUserRequest:
    type: object
    properties:
      password:
        type: string
        minLength: 8
        maxLength: 16
      nickName:
        type: string
        minLength: 2
        maxLength: 32
      email:
        type: string
        minLength: 2
        maxLength: 32
        pattern: ^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$
      remark:
        type: string
        maxLength: 255
      custom:
        type: string
        maxLength: 255
        description: 存储前端自定义json
  UserListResponse:
    allOf:
      - $ref: "#/definitions/OnePageData"
      - type: object
        properties:
          list:
            type: array
            items:
              $ref: "#/definitions/UserResponse"
  UserResponse:
    type: object
    properties:
      id:
        type: integer
      userName:
        type: string
      nickName:
        type: string
      email:
        type: string
      updateTime:
        type: string
      createTime:
        type: string
      remark:
        type: string
      custom:
        type: string
      taskTotal:
        type: string
        description: 任务总数
      taskFinishCount:
        type: string
        description: 已完成任务数
      taskTimelyCount:
        type: string
        description: 及时完成任务数
      taskTimeoutCount:
        type: string
        description: 超期任务数
      timelinessRate:
        type: string
        description: 任务及时达成率
  UserLoginResponse:
    type: object
    properties:
      id:
        type: integer
      userName:
        type: string
      nickName:
        type: string
      email:
        type: string
      updateTime:
        type: string
      createTime:
        type: string
      remark:
        type: string
      custom:
        type: string
  CreateProjectVersionRequest:
    type: object
    required:
      - version
      - pid
    properties:
      version:
        type: string
      pid:
        type: integer
      remark:
        type: string
  CreateProjectRequest:
    type: object
    required:
      - name
      - uid
      - status
    properties:
      name:
        type: string
        minLength: 2
        maxLength: 32
        description: 项目名
      uid:
        type: integer
        minLength: 1
        maxLength: 8
        description: 用户id
      memberUid:
        type: string
        description: 项目成员uid,使用英文逗分隔
      status:
        type: string
        enum:
          - "1"
          - "2"
        description: "项目状态,1:活跃;2:非活跃"
      remark:
        type: string
        maxLength: 255
      module:
        type: string
        description: 功能模块,json字符串
  UpdateProjectRequest:
    type: object
    required:
      - uid
    properties:
      name:
        type: string
        minLength: 2
        maxLength: 32
        description: 项目名称
      uid:
        type: integer
        minLength: 1
        maxLength: 8
        description: 用户id
      memberUid:
        type: string
        description: 项目成员uid,使用英文逗分隔
      status:
        type: string
        enum:
          - "1"
          - "2"
        description: "项目状态,1:活跃;2:非活跃"
      remark:
        type: string
        maxLength: 255
      module:
        type: string
        description: 功能模块,json字符串
  GetProjectByIdResponse:
    type: object
    properties:
      id:
        type: integer
      uid:
        type: integer
        description: 项目负责人Id
      name:
        type: string
      nickName:
        type: string
        description: 项目负责人昵称
      status:
        type: string
        description: "项目状态,1:活跃;2:非活跃"
      remark:
        type: string
      updateTime:
        type: string
      createTime:
        type: string
  ProjectResponse:
    type: object
    properties:
      id:
        type: integer
      uid:
        type: integer
        description: 项目负责人Id
      name:
        type: string
      nickName:
        type: string
        description: 项目负责人昵称
      status:
        type: string
        description: "项目状态,1:活跃;2:非活跃"
      remark:
        type: string
      updateTime:
        type: string
      createTime:
        type: string
  ProjectModuleResponse:
    type: object
    properties:
      id:
        type: integer
      pid:
        type: integer
        description: 项目Id
      module:
        type: string
        description: 模块名
      level:
        type: integer
        description: 权重值
  ProjectListResponse:
    allOf:
      - $ref: "#/definitions/OnePageData"
      - type: object
        properties:
          list:
            type: array
            items:
              $ref: "#/definitions/ProjectResponse"
  ProjectStatisticsListResponse:
    allOf:
      - $ref: "#/definitions/OnePageData"
      - type: object
        properties:
          list:
            type: array
            items:
              $ref: "#/definitions/ProjectStatisticsResponse"
  ProjectStatisticsResponse:
    type: object
    properties:
      id:
        type: integer
      name:
        type: string
      version:
        type: string
      taskTotal:
        type: integer
        description: 项目任务总数
      rateOfFinish:
        type: string
        description: 项目任务完成率
  ProjectGroupNameResponse:
    type: object
    properties:
      name:
        type: string
        description: 聚合后的项目名
  ProjectVersionsResponse:
    type: object
    properties:
      id:
        type: integer
        description: 项目版本id
      version:
        type: string
        description: 项目版本
  ProjectVersionsAllResponse:
    type: object
    properties:
      vid:
        type: integer
        description: 版本id
      version:
        type: string
        description: 版本名
      pid:
        type: integer
        description: 项目id
      projectName:
        type: string
        description: 项目名
  UserListByPidResponse:
    allOf:
      - $ref: "#/definitions/OnePageData"
      - type: object
        properties:
          list:
            type: array
            items:
              $ref: "#/definitions/UserByPidResponse"
  UserByPidResponse:
    type: object
    properties:
      id:
        type: integer
      userName:
        type: string
      nickName:
        type: string
      email:
        type: string
      updateTime:
        type: string
      createTime:
        type: string
      remark:
        type: string
      custom:
        type: string
      projectName:
        type: string
  CreateTaskRequest:
    type: object
    required:
      - pid
      - uid
      - vid
      - task
      - taskType
      - status
      - mid
      - haveDocument
    properties:
      pid:
        type: integer
        description: 项目id
      uid:
        type: integer
        description: 任务负责人用户id
      vid:
        type: integer
        description: 项目版本id
      taskType:
        type: string
        enum:
          - 1
          - 2
          - 3
        description: 任务类型 1前端；2后端；3产品
      task:
        type: string
        description: 任务内容
        maxLength: 1023
      status:
        type: string
        enum:
          - 1
          - 2
          - 3
          - 4
          - 5
          - 6
        description: 任务状态 1已完成；2反馈; 3待验收；4开发中；5暂停; 6排队中
      playStartTime:
        type: string
        description: 计划开始时间,时间戳(ms)
      playEndTime:
        type: string
        description: 计划结束时间,时间戳(ms)
      mid:
        type: integer
        description: 功能模块id
      haveDocument:
        type: integer
        enum:
          - 0
          - 1
        description: 是否需要文档，0否；1是
      relevance:
        type: string
        description: 任务关联项目版本id,多个用英文逗号分隔
      serialNumber:
        type: integer
        description: 任务序号(拖拽排序模式中,右键插入任务的情况下必填)
  UpdateTaskRequest:
    type: object
    required:
      - uid
    properties:
      taskType:
        type: string
        enum:
          - 1
          - 2
          - 3
        description: 任务类型 1前端；2后端；3产品
      task:
        type: string
        description: 任务内容
        maxLength: 1023
      status:
        type: string
        enum:
          - 1
          - 2
          - 3
          - 4
          - 5
          - 6
        description: 任务状态 1已完成；2反馈; 3待验收；4开发中；5暂停; 6排队中
      playStartTime:
        type: string
        description: 计划开始时间,时间戳(ms)
      playEndTime:
        type: string
        description: 计划结束时间,时间戳(ms)
      acceptanceTime:
        type: string
        description: 验收时间,时间戳(ms)
      quality:
        type: string
        description: 质量分
      document:
        type: string
        description: 文档分
      remark:
        type: string
        description: 备注
      link:
        type: string
        description: 文档备注
      uid:
        type: integer
        description: 负责人用户id
      pid:
        type: integer
        description: 项目id
      mid:
        type: integer
        description: 功能模块id
      vid:
        type: integer
        default: 项目版本id
      haveDocument:
        type: integer
        enum:
          - 0
          - 1
        description: 是否需要文档，0否；1是
      relevance:
        type: string
        description: 任务关联项目版本id,多个用英文逗号分隔
  TaskListResponse:
    allOf:
      - $ref: "#/definitions/OnePageData"
      - type: object
        properties:
          list:
            type: array
            items:
              $ref: "#/definitions/TaskResponse"
  TaskResponse:
    type: object
    properties:
      id:
        type: integer
      projectName:
        type: string
      projectVersion:
        type: string
      projectUid:
        type: integer
      taskType:
        type: string
        description: 任务类型 1前端；2后端；3产品
      task:
        type: string
      pid:
        type: integer
      uid:
        type: integer
        description: 开发负责人id
      vid:
        type: integer
        description: 项目版本id
      status:
        type: string
        description: 任务状态 1已完成；2反馈; 3待验收；4开发中；5暂停; 6排队中
      nickName:
        type: string
        description: 开发负责人昵称
      playStartTime:
        type: string
        description: 计划开始时间
      playEndTime:
        type: string
        description: 计划结束时间
      timely:
        type: string
        description: 及时性,1是;2否
      quality:
        type: string
        description: 质量分
      document:
        type: string
        description: 文档分
      remark:
        type: string
        description: 备注
      link:
        type: string
        description: 文档备注
      overtime:
        type: string
        description: 1已过期
      warning:
        type: string
        description: 1将过期
      module:
        type: string
        description: 功能模块名
      moduleLevel:
        type: integer
        description: 功能模块权重值
      workTimeCount:
        type: string
        description: 累计工时
      progress:
        type: string
        description: 任务进度
      haveDocument:
        type: integer
        description: 是否需要文档，0否；1是
      acceptanceTime:
        type: string
        description: 验收时间
      createdUid:
        type: integer
        description: 任务创建者id
      createdUserNickname:
        type: string
        description: 任务创建人昵称
  TaskStatisticsResponse:
    type: object
    properties:
      rateOfFinish:
        type: string
        description: 总任务完成率
      finishTaskNum:
        type: string
        description: 已完成任务数
      taskTotal:
        type: string
        description: 任务总数
      progressTaskNum:
        type: string
        description: 开发中任务数
      warningTaskNum:
        type: string
        description: 即将过期任务数
      overtimeTaskNum:
        type: string
        description: 已过期任务数
  OperationLogResponse:
    type: object
    properties:
      id:
        type: integer
      uid:
        type: integer
      userName:
        type: string
      record:
        type: string
      createTime:
        type: string
  OperationLogListResponse:
    allOf:
      - $ref: "#/definitions/OnePageData"
      - type: object
        properties:
          list:
            type: array
            items:
              $ref: "#/definitions/OperationLogResponse"
  CreateTaskChangeRequest:
    type: object
    required:
      - taskId
      - uid
      - status
      - beforeStartTime
      - beforeEndTime
      - afterStartTime
      - afterEndTime
      - reason
    properties:
      taskId:
        type: integer
        description: 任务id
      uid:
        type: integer
        description: 申请变更用户id
      status:
        type: integer
        description: 状态:1待审核,2通过,3未通过,4不审核
        enum:
          - 1
          - 2
          - 3
          - 4
      beforeStartTime:
        type: string
        description: 变更前开始时间(时间戳,毫秒)
      beforeEndTime:
        type: string
        description: 变更前结束时间(时间戳,毫秒)
      afterStartTime:
        type: string
        description: 变更后开始时间(时间戳,毫秒)
      afterEndTime:
        type: string
        description: 变更后结束时间(时间戳,毫秒)
      reason:
        type: string
        maxLength: 255
        description: 变更原因
  UpdateTaskChangeRequest:
    type: object
    required:
      - status
    properties:
      status:
        type: integer
        description: 状态:1待审核,2通过,3未通过,4不审核
        enum:
          - 1
          - 2
          - 3
          - 4
  TaskChangeListResponse:
    allOf:
      - $ref: "#/definitions/OnePageData"
      - type: object
        properties:
          list:
            type: array
            items:
              $ref: "#/definitions/TaskChangeResponse"
  TaskChangeResponse:
    type: object
    properties:
      id:
        type: integer
      taskId:
        type: integer
      task:
        type: string
      projectName:
        type: string
      projectVersion:
        type: string
      uid:
        type: integer
        description: 申请人id
      userName:
        type: string
        description: 申请人userName
      nickName:
        type: string
        description: 申请人nickName
      auditorId:
        type: integer
        description: 审核人id
      auditorName:
        type: string
        description: 审核人昵称
      status:
        type: integer
        description: 状态:1待审核,2通过,3未通过,4不审核
      beforeStartTime:
        type: string
      beforeEndTime:
        type: string
      afterStartTime:
        type: string
      afterEndTime:
        type: string
      reason:
        type: string
      createTime:
        type: string
  CreateTaskLogRequest:
    type: object
    required:
      - taskId
      - uid
      - workTime
      - progress
      - log
    properties:
      taskId:
        type: integer
        description: 任务id
      uid:
        type: integer
        description: 申请变更用户id
      workTime:
        type: string
        description: 工时
      progress:
        type: string
        description: 进度
      log:
        type: string
        maxLength: 1023
        description: 日志内容
      feedback:
        type: string
        maxLength: 1023
        description: 问题反馈
  TaskLogListResponse:
    allOf:
      - $ref: "#/definitions/OnePageData"
      - type: object
        properties:
          list:
            type: array
            items:
              $ref: "#/definitions/TaskLogResponse"
  TaskLogResponse:
    type: object
    properties:
      id:
        type: integer
      taskId:
        type: integer
      uid:
        type: integer
      userName:
        type: string
      nickName:
        type: string
      workTime:
        type: string
      progress:
        type: string
      log:
        type: string
      feedback:
        type: string
      createTime:
        type: string
  LastTaskLogResponse:
    type: object
    properties:
      id:
        type: integer
      taskId:
        type: integer
      uid:
        type: integer
      workTime:
        type: string
      progress:
        type: string
      log:
        type: string
      feedback:
        type: string
      createTime:
        type: string
  TaskLogAggregationListResponse:
    allOf:
      - $ref: "#/definitions/OnePageData"
      - type: object
        properties:
          list:
            type: array
            items:
              $ref: "#/definitions/TaskLogAggregationResponse"
  TaskLogAggregationResponse:
    type: object
    properties:
      id:
        type: integer
      uid:
        type: integer
      userName:
        type: string
      nickName:
        type: string
      taskId:
        type: integer
      name:
        type: string
      version:
        type: string
      log:
        type: string
      feedback:
        type: string
      createTime:
        type: string
  CreateFeedbackRequest:
    type: object
    properties:
      uid:
        type: integer
        description: 反馈人id
      tid:
        type: integer
        description: 关联任务id
      feedback:
        type: string
        description: 反馈内容
      remark:
        type: string
        description: 备注
  UpdateFeedbackRequest:
    type: object
    properties:
      uid:
        type: integer
        description: 反馈人id
      feedback:
        type: string
        description: 反馈内容
      remark:
        type: string
        description: 备注
  FeedbackListResponse:
    allOf:
      - $ref: "#/definitions/OnePageData"
      - type: object
        properties:
          list:
            type: array
            items:
              $ref: "#/definitions/FeedbackResponse"
  FeedbackResponse:
    type: object
    properties:
      id:
        type: integer
      uid:
        type: integer
      nickName:
        type: string
      tid:
        type: integer
      feedback:
        type: string
      remark:
        type: string
      updateTime:
        type: string
      createTime:
        type: string